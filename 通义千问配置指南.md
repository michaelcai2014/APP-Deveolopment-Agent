# 通义千问 API 配置指南

## 🔑 获取 API Key

1. **访问 DashScope 控制台**
   - 打开：https://dashscope.console.aliyun.com/overview
   - 使用阿里云账号登录

2. **创建 API Key**
   - 在左侧导航栏选择「API Key 管理」
   - 点击「创建新的 API Key」
   - 复制生成的 API Key（格式类似：sk-xxxxxxxxxxxxx）

3. **充值账户（如需要）**
   - 通义千问需要账户有余额才能使用
   - 在 DashScope 控制台充值（通常有免费额度）

## ⚙️ 配置环境变量

在 `app-mvp-estimator` 目录下创建或编辑 `.env.local` 文件：

```bash
# 通义千问 API Key（必填）
QWEN_API_KEY=sk-your-qwen-api-key-here

# 可选：选择模型（默认使用 qwen-turbo）
# 可选值：qwen-mini（最经济）、qwen-turbo（推荐）、qwen-plus、qwen-max
QWEN_MODEL=qwen-turbo
```

## 📊 模型对比

| 模型 | 特点 | 适用场景 |
|------|------|----------|
| qwen-mini | 最经济，速度快 | 简单任务，预算有限 |
| qwen-turbo | 性价比高，速度快（推荐） | 大多数场景 |
| qwen-plus | 性能更强 | 复杂任务 |
| qwen-max | 最强性能 | 高要求任务 |

## 💰 价格参考

- **qwen-mini**：最便宜
- **qwen-turbo**：性价比高（推荐）
- 通常有免费额度，具体查看 DashScope 控制台

## 🔄 更新配置后

配置完成后，重启开发服务器：

```bash
# 停止当前服务器（Ctrl+C）
npm run dev
```

## 📝 示例配置

`.env.local` 文件示例：

```env
QWEN_API_KEY=sk-1234567890abcdef
QWEN_MODEL=qwen-turbo
```

## ✅ 验证配置

配置完成后，访问 http://localhost:3000，输入 App 描述并点击「生成开发评估」，如果配置正确，应该能正常生成评估报告。

## 🆘 常见问题

### Q: 提示 "QWEN_API_KEY 未配置"
A: 检查 `.env.local` 文件是否存在，且包含正确的 API Key

### Q: 提示 "余额不足"
A: 访问 DashScope 控制台充值账户

### Q: API 调用失败
A: 检查网络连接，确保能访问阿里云 API（国内网络通常没问题）

## 📚 更多信息

- **DashScope 文档**：https://help.aliyun.com/zh/model-studio/
- **API 参考**：https://help.aliyun.com/zh/model-studio/developer-reference/api-details-9

